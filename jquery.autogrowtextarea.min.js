jQuery.fn.autoGrow = function () { return this.each(function () { var e = function (e) { t.innerHTML = String(e.value).replace(/&/g, "&amp;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/ /g, "&nbsp;").replace(/\n/g, "<br />") + "..<br/>", jQuery(e).height() < jQuery(t).height() ? (jQuery(e).height(jQuery(t).height()), jQuery(e).data("initHeight") || jQuery(e).data("initHeight", jQuery(t).height())) : jQuery(t).height() < jQuery(e).data("initHeight") && jQuery(e).height(jQuery(e).data("initHeight") - 14) }, t = function (e) { return jQuery(e).after('<div class="autogrow-textarea-mirror"></div>'), jQuery(e).next(".autogrow-textarea-mirror")[0] }(this); t.style.initMinHeight = jQuery(this).height(), t.style.display = "none", t.style.wordWrap = "break-word", t.style.whiteSpace = "normal", t.style.padding = jQuery(this).css("padding"), t.style.width = jQuery(this).css("width"), t.style.fontFamily = jQuery(this).css("font-family"), t.style.fontSize = jQuery(this).css("font-size"), t.style.lineHeight = jQuery(this).css("line-height"), this.style.overflow = "hidden", this.style.minHeight = "25px", this.onkeyup = function () { e(this) }, e(this) }) };